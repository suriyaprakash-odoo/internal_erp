<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<data>

		<record model="ir.ui.view" id="email_template_form_campaign">
			<field name="name">email.template.form.inherited</field>
			<field name="model">mail.template</field>
			<field name="priority">2</field>
			<field name="arch" type="xml">
				<form string="Templates">
					<sheet>
						<div class="oe_button_box" name="button_box">
							<field name="ref_ir_act_window" invisible="1"/>
							<button class="oe_stat_button" name="create_action" type="object"
									attrs="{'invisible':[('ref_ir_act_window','!=',False)]}" icon="fa-plus"
									help="Display an option on related documents to open a composition wizard with this template">
								<div class="o_form_field o_stat_info">
									<span class="o_stat_text">Add</span>
									<span class="o_stat_text">Context Action</span>
								</div>
							</button>
							<button name="unlink_action" type="object"
									class="oe_stat_button" icon="fa-minus"
									attrs="{'invisible':[('ref_ir_act_window','=',False)]}"
									help="Remove the contextual action to use this template on related documents" widget="statinfo">
								<div class="o_form_field o_stat_info">
									<span class="o_stat_text">Remove</span>
									<span class="o_stat_text">Context Action</span>
								</div>
							</button>
							<button class="oe_stat_button" name="%(mail.wizard_email_template_preview)d" icon="fa-search-plus" string="Preview"
									type="action" target="new"
									context="{'template_id':active_id}"/>
						</div>
						<div class="oe_title">
							<label for="name" class="oe_edit_only"/>
							<h1>
								<field name="name" required="1"/>
							</h1>
							<group>
								<field name="model_id" required="1" options="{'no_create': True}" domain="['|',('model','=','res.partner'),('model','=','crm.lead')]"/>
								<field name="model" invisible="1"/>
							</group>
						</div>
						<notebook>
							<page string="Content">
								<group style="width:500px;">
									<field name="email_from"
										   placeholder="Email From"/>
								</group>
								<group>
									<label for="subject"/>
									<h2 style="margin: 0;">
										<field name="subject" placeholder="Subject (placeholders may be used here)"/>
									</h2>
								</group>
								<field name="body_html" widget="html" options="{'style-inline': true}"/>
								<field name="attachment_ids" widget="many2many_binary"/>
							</page>
							<page string="Email Configuration">
								<group>
									<field name="use_default_to" invisible="1"/>
									<field name="email_to" attrs="{'invisible': [('use_default_to', '=', True)]}"
										   placeholder="Comma-separated recipient addresses"/>
									<field name="partner_to" attrs="{'invisible': [('use_default_to', '=', True)]}"
										   placeholder="Comma-separated ids of recipient partners"/>
									<field name="email_cc" attrs="{'invisible': [('use_default_to', '=', True)]}"
										   placeholder="Comma-separated carbon copy recipients addresses"/>
									<field name="reply_to"
										   placeholder="Preferred reply address"/>
									<field name="user_signature" string="Author Signature (mass mail only)" invisible="1"/>
									<field name="scheduled_date" string="Scheduled Send Date" invisible="1"/>
								</group>
							</page>
							<page string="Advanced Settings">
								<group>
									<field name="lang" invisible="1"/>
									<field name="mail_server_id"/>
									<field name="auto_delete"/>
									<field name="report_template" domain="[('model','=',model)]"/>
									<field name="report_name" attrs="{'invisible':[('report_template','=',False)]}"/>
								</group>
							</page>
							<page string="Dynamic Placeholder Generator">
								<group>
									<field name="model_object_field"
										   domain="[('model_id','=',model_id),('ttype','!=','one2many'),('ttype','!=','many2many')]"/>
									<field name="sub_object" readonly="1"/>
									<field name="sub_model_object_field"
										   domain="[('model_id','=',sub_object),('ttype','!=','one2many'),('ttype','!=','many2many')]"
										   attrs="{'readonly':[('sub_object','=',False)],'required':[('sub_object','!=',False)]}"/>
									<field name="null_value"/>
									<field name="copyvalue"/>
									<field name="unsubscribe_link"/>
								</group>
							</page>
						</notebook>
					</sheet>
				</form>
			</field>
		</record>

		<record model="ir.ui.view" id="email_template_tree_inherited">
			<field name="name">mail.template.tree.inherited</field>
			<field name="model">mail.template</field>
			<field name="priority">2</field>
			<field name="arch" type="xml">
				<tree string="Templates">
					<field name="mail_server_id" invisible="1"/>
					<field name="name"/>
					<field name="model_id"/>
					<field name="subject"/>
					<field name="email_from" invisible="1"/>
					<field name="email_to" invisible="1"/>
					<field name="partner_to"/>
					<field name="report_name" invisible="1"/>
				</tree>
			</field>
		</record>

		<record model="ir.actions.act_window" id="action_email_template_tree_all_inherited">
			<field name="name">Email Templates</field>
			<field name="res_model">mail.template</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="view_id" ref="email_template_tree_inherited"/>
			<field name="domain">['|',('model','=','res.partner'),('model','=','crm.lead')]</field>
			<field name="inherit_id" ref="mail.action_email_template_tree_all"/>
			<field name="search_view_id" ref="mail.view_email_template_search"/>
		</record>

		<record id="action_open_email_template" model="ir.actions.act_window.view">
			<field name="sequence">4</field>
			<field name="view_mode">form</field>
			<field name="view_id" ref="email_template_form_campaign"/>
			<field name="act_window_id" ref="action_email_template_tree_all_inherited"/>
		</record>

		<record id="action_open_email_template_tree" model="ir.actions.act_window.view">
			<field name="sequence">3</field>
			<field name="view_mode">tree</field>
			<field name="view_id" ref="email_template_tree_inherited"/>
			<field name="act_window_id" ref="action_email_template_tree_all_inherited"/>
		</record>

		<record id="action_open_email_template_default_form" model="ir.actions.act_window.view">
			<field name="sequence">2</field>
			<field name="view_mode">form</field>
			<field name="view_id" ref="mail.email_template_form"/>
			<field name="act_window_id" ref="mail.action_email_template_tree_all"/>
		</record>

		<record id="action_open_email_template_default_tree" model="ir.actions.act_window.view">
			<field name="sequence">1</field>
			<field name="view_mode">tree</field>
			<field name="view_id" ref="mail.email_template_tree"/>
			<field name="act_window_id" ref="mail.action_email_template_tree_all"/>
		</record>

		<!-- Menu Item for Email Templates -->
		<menuitem id="menu_email_templates_inherit" parent="crm_campaign" action="action_email_template_tree_all_inherited" sequence="6"/>

	</data>
</odoo>
