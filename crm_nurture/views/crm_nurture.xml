<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>

		<record id="ir_send_mail_cron_scheduler_action" model="ir.cron">
			<field name="name">Email Tag Mail scheduler</field>
			<field name="model_id" ref="model_crm_campaign" />
			<field name="user_id" ref="base.user_root" />
			<field name="state">code</field>
			<field name="code">model.send_mail_scheduler()</field>
			<field name="interval_number">15</field>
			<field name="interval_type">minutes</field>
			<field name="numbercall">-1</field>
			<field name="doall" eval="False" />
		</record>


		<!-- Campaign configuration menu tree view start -->
		<record model="ir.ui.view" id="crm_tracking_campaign_tree">
			<field name="name">crm.campaign.tree</field>
			<field name="model">crm.campaign</field>
			<field name="arch" type="xml">
				<tree string="Campaign">
					<field name="name" />
					<field name="email_template_ids" />
					<field name="no_delete" invisible="1" />
				</tree>
			</field>
		</record>

		<record model="ir.ui.view"
			id="view_mail_tracking_email_form_inherit">
			<field name="name">mail.tracking.email.form</field>
			<field name="model">mail.tracking.email</field>
			<field name="inherit_id"
				ref="mail_tracking.view_mail_tracking_email_form" />
			<field name="arch" type="xml">
				<xpath expr="//field[@name='mail_id']" position="after">
					<field name="lead_id" />
					<!--<field name="lead_id_func" invisible="1"/> -->
				</xpath>
			</field>
		</record>

		<record model="ir.ui.view" id="crm_tracking_campaign_form">
			<field name="name">crm.campaign.form</field>
			<field name="model">crm.campaign</field>
			<field name="arch" type="xml">
				<form string="Campaign">
					<sheet>
						<group colspan="2" col="4">
							<field name="name" />
							<field name="model_id" required="1"
								attrs="{'readonly': [('model_change', '=',True)]}"
								domain="['|',('model','=','res.partner'),('model','=','crm.lead')]"
								options="{'no_create' : True,'no_edit' : True}" />
							<field name="model" invisible="1" />
							<field name="model_change" invisible="1" />
							<field name="model_id_2" invisible="1" />
						</group>
						<group>
							<field name="email_template_ids" string="Add Emails"
								context="{'template_ids':email_template_ids}">
								<tree string="Add Emails" editable="bottom">
									<field name="mail_sequence" />
									<field name="template_id"
										options="{'no_create' : True,'no_edit' : True}" required="1"
										domain="[('model_id','=',parent.model_id)]" />
									<field name="delay_days" required="1"
										attrs="{'readonly': [('send_now', '==',True)]}" />
									<field name="time_to_send" required="1"
										attrs="{'readonly': [('send_now', '==',True)]}" />
									<field name="send_now"
										attrs="{'readonly': ['|',('delay_days', '!=',0),('mail_sequence', '!=',1)]}" />
								</tree>
							</field>
						</group>
					</sheet>
				</form>
			</field>
		</record>

		<record id="action_campaign_menu" model="ir.actions.act_window">
			<field name="name">Campaigns</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">crm.campaign</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
		</record>

		<menuitem id="crm_campaign" name="Nurture Campaigns"
			parent="crm.crm_menu_config" sequence="4" />
		<menuitem action="action_campaign_menu" id="menu_campaigns"
			name="Campaigns" parent="crm_campaign" sequence="1" />

	</data>
</odoo>