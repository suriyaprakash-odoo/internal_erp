<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>

		<!-- Inherited account invoice form -->
		<record id="currency_account_invoice_form_inherited" model="ir.ui.view">
			<field name="name">account.invoice.form</field>
			<field name="model">account.invoice</field>
			<field name="inherit_id" ref="account.invoice_form" />
			<field name="arch" type="xml">
				<xpath expr="//field[@name='payment_term_id']" position="after">
					<field name="currency_rate" attrs="{'invisible':[('currency_rate','=', 0)]}"/>
					<field name="currency_update_flag" invisible="1"/>
				</xpath>

				<xpath expr="//form/sheet/div[@name='button_box']"
					position="inside">
					<button name="action_currency_rate_update" type="object"
						class="oe_stat_button" icon="fa-money" string="Currency Update" 
						attrs="{'invisible':['|',('currency_update_flag','!=', True),('state','!=','draft')]}">
					</button>
					
				</xpath>
			</field>
		</record>

		<record id="payment_view_account_payment_form_inherited" model="ir.ui.view">
		    <field name="name">account.payment.inherit</field>
		    <field name="type">form</field>
		    <field name="model">account.payment</field>
		    <field name="inherit_id" ref="account.view_account_payment_form"/>
		    <field name="arch" type="xml">
		    	<xpath expr="//field[@name='journal_id']" position="after">
					<field name="currency_update_flag" invisible="1"/>
				</xpath>
		        <xpath expr="//form/sheet/div[@name='button_box']"
					position="inside">
					<button name="action_currency_rate_update" type="object"
						class="oe_stat_button" icon="fa-money" string="Currency Update" 
						attrs="{'invisible':['|',('currency_update_flag','!=', True),('state','!=','draft')]}">
					</button>
					
				</xpath>
		        
		    </field>
	    </record>

		<record id="view_currency_form_inherited" model="ir.ui.view">
			<field name="name">res.currency.form</field>
			<field name="model">res.currency</field>
			<field name="inherit_id" ref="base.view_currency_form" />
			<field name="arch" type="xml">
				<xpath expr="//field[@name='rate']" position="after">
					<field name="currency_update_invoice"/>
				</xpath>

			</field>
		</record>

	</data>
</odoo>