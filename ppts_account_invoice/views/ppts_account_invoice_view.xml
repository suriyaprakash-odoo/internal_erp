<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<record id="ppts_account_invoice_form_inherited" model="ir.ui.view">
		<field name="name">account.invoice.form.view</field>
		<field name="model">account.invoice</field>
		<field name="inherit_id" ref="account.invoice_form" />
		<field name="arch" type="xml">

			<xpath expr="//field[@name='payment_term_id']" position="after">
				<field name="buyer_ref"/>
				<field name="buyer_po_date"/>
			</xpath>

			<!-- Line tree view -->
			<xpath expr="//field[@name='invoice_line_ids']/tree/field[@name='product_id']" position="before">
				<field name="gst_code_id"/>
			</xpath>
			<xpath expr="//field[@name='invoice_line_ids']/tree/field[@name='name']" position="after">
				<field name="project_code"/>
			</xpath>
			<xpath expr="//field[@name='invoice_line_ids']/tree/field[@name='uom_id']" groups="product.group_uom" position="replace">
				<field name="uom_id"/>
			</xpath>
			<xpath expr="//field[@name='invoice_line_ids']/tree/field[@name='currency_id']" invisible="1" position="replace">
				<field name="currency_id"/>
			</xpath>
			<xpath expr="//field[@name='journal_id']" position="replace">

			</xpath>
			<xpath expr="//field[@name='date_due']" position="after">
				<field name="journal_id"/>
			</xpath>

			<!-- Line Form View -->
	<!-- 		<xpath expr="//field[@name='invoice_line_ids']/form/group/group/field[@name='sequence']" position="replace">
				<field name="sequence" invisible="1"/>
			</xpath> -->

			<!-- <xpath expr="//field[@name='invoice_line_ids']/form/group/group/field[@name='sequence']" position="attributes">
                <attribute name="invisible">True</attribute>
            </xpath>
			<xpath expr="//field[@name='invoice_line_ids']/form/group/group/field[@name='product_id']" position="before">
				<field name="gst_code_id"/>
			</xpath>
			<xpath expr="//field[@name='invoice_line_ids']/form/group/group/field[@name='name']" position="after">
				<field name="project_code"/>
			</xpath>
			<xpath expr="//field[@name='invoice_line_ids']/form/group/group/field[@name='uom_id']" groups="product.group_uom" position="replace">
				<field name="uom_id"/>
			</xpath>
			<xpath expr="//field[@name='invoice_line_ids']/form/group/group/field[@name='discount']" groups="product.group_no_one" position="replace">
				<field name="discount" invisible="1"/>
			</xpath>
			<xpath expr="//field[@name='invoice_line_ids']/form/group/group/field[@name='currency_id']" invisible="1" position="replace">
				<field name="currency_id"/>
			</xpath> -->


			<xpath expr="//field[@name='invoice_line_ids']/tree" position="attributes">
                <attribute name="editable"/>
            </xpath>
            <xpath expr="//notebook/page/field/tree" position="after">
            	<form>
            		<group>
            			<group>
							<field name="sequence" widget="handle" invisible="1"/>
							<field name="gst_code_id"/>
                            <field name="product_id" domain="[('sale_ok','=',True)]" required="1"/>
                            <field name="origin" invisible="1"/>
                            <field name="is_rounding_line" invisible="1"/>
                            <field name="name"/>
                            <field name="project_code"/>
                            <field name="company_id" invisible="1"/>
                            <field name="account_id" groups="account.group_account_user"
                                domain="[('company_id', '=', parent.company_id), ('internal_type', '=', 'other'), ('deprecated', '=', False)]"/>
						</group>
						<group>
							<field name="account_analytic_id" groups="analytic.group_analytic_accounting"
                                domain="[('company_id', '=', parent.company_id)]"
                                context="{'default_partner_id': parent.partner_id}"/>
                            <field name="analytic_tag_ids" groups="analytic.group_analytic_accounting" widget="many2many_tags" options="{'color_field': 'color'}"/>
                            <field name="quantity"/>
                            <field name="uom_id" groups="product.group_uom"/>
                            <field name="price_unit"/>
                            <field name="discount" groups="base.group_no_one" invisible="1"/>
                            <field name="invoice_line_tax_ids" widget="many2many_tags" options="{'no_create': True}"
                                domain="[('type_tax_use','in',('all','sale')),('company_id', '=', parent.company_id)]"/>
                            <field name="price_subtotal"/>
                            <field name="currency_id"/>
						</group>
					</group>
				</form>
			</xpath>

			<xpath expr="//notebook/page[2]" position="inside">
				<page string="Reference">
					<group>
						<group>
							<field name="bank_id" required="1"/>
							<field name="acc_number" required="1"/>
						</group>
						<group>
						</group>
						<field name="bank_details" required="1"/>
					</group>
				</page>
			</xpath>
			<xpath expr="//notebook/page[2]" position="after">
				<page string="Reference">
					<group>
						<group>
							<field name="firc_no"/>
							<field name="softex_no"/>
							<field name="nsdl_ref_no"/>
							<field name="e_brc_no"/>
						</group>
						<group>
							<field name="other_ref"/>
							<field name="softex_ref_date"/>
							<field name="nsdl_ref_date"/>
						</group>
					</group>
				</page>
			</xpath>

		</field>
	</record>

	<record id="ppts_account_invoice_tree_inherited" model="ir.ui.view">
		<field name="name">account.invoice.tree.view</field>
		<field name="model">account.invoice</field>
		<field name="inherit_id" ref="account.invoice_tree" />
		<field name="arch" type="xml">

			<xpath expr="//field[@name='amount_total_signed']" position="before">
				<field name="currency_name"/>
			</xpath>

		</field>
	</record>

	<record id="view_partner_bank_form_inherited" model="ir.ui.view">
		<field name="name">res.partner.bank.form</field>
		<field name="model">res.partner.bank</field>
		<field name="inherit_id" ref="base.view_partner_bank_form" />
		<field name="arch" type="xml">
			<xpath expr="//field[@name='acc_number']" position="after">
				<field name="acc_name"/>
			</xpath>
			<xpath expr="//field[@name='currency_id']" position="after">
				<field name="partner_id"/>
			</xpath>
		</field>
	</record>

	<record id="view_res_bank_form_inherited" model="ir.ui.view">
		<field name="name">res.bank.form</field>
		<field name="model">res.bank</field>
		<field name="inherit_id" ref="base.view_res_bank_form" />
		<field name="arch" type="xml">
			<xpath expr="//field[@name='name']" position="after">
				<field name="branch"/>
				<field name="swift_code"/>
				<field name="branch_code"/>
			</xpath>
			<xpath expr="//field[@name='bic']" position="after">
				<field name="ifsc"/>
				<field name="micr"/>
			</xpath>
			<xpath expr="//field[@name='phone']" position="after">
				<field name="bank_contact"/>
			</xpath>
		</field>
	</record>

	<record id="view_country_form_inherited" model="ir.ui.view">
		<field name="name">res.country.form</field>
		<field name="model">res.country</field>
		<field name="inherit_id" ref="base.view_country_form" />
		<field name="arch" type="xml">
			<xpath expr="//field[@name='code']" position="after">
				<field name="sez_code"/>
			</xpath>
		</field>
	</record>

	<record model="ir.ui.view" id="invoice_supplier_form_domain_inherited">
        <field name="name">supplier.invoice.line.domain.tax</field>
        <field name="model">account.invoice</field>
        <field name="inherit_id" ref="account.invoice_supplier_form"/>
        <field name="arch" type="xml">
            <xpath expr="/form/sheet/notebook/page[1]/field/tree/field[@name='invoice_line_tax_ids']" position="replace">
            	<field name="invoice_line_tax_ids" widget="many2many_tags" options="{'no_create': True}" domain="[('type_tax_use','in',('all','purchase')),('company_id', '=', parent.company_id)]"/>
            </xpath>
            <xpath expr="//field[@name='tax_line_ids']" position="replace">
            	
            </xpath>
            <xpath expr="//form/sheet/notebook/page[2]/group[1]" position="after">
	            <group>
	            	<div class="oe_inline">
		                <field name="tax_line_ids">
		                    <tree editable="bottom" string="Taxes">
		                        <field name="name"/>
		                        <!--Need invisible fields for on_change to create all necessary info -->
		                        <field name="tax_id" invisible="1"/>
		                        <field name="sequence" invisible="1"/>
		                        <field name="manual" invisible="1"/>
		                        <field name="account_id" groups="account.group_account_user"/>
		                        <field name="account_analytic_id" domain="[('company_id', '=', parent.company_id)]" groups="analytic.group_analytic_accounting"/>
		                        <field name="amount"/>
		                        <field name="amount_rounding" invisible="1"/>
		                        <field name="amount_total" invisible="1"/>
		                        <field name="currency_id" invisible="1" force_save="1"/>
		                    </tree>
		                </field>
	            	</div>
	            </group>
	        </xpath>
	        <xpath expr="//field[@name='reference']" position="after">
            	<field name="vendor_invoice"/>
            </xpath>
        </field>
    </record>    

	<menuitem id="mam_state_master" name="State" parent="account.menu_finance_configuration" sequence="1" action="base.action_country_state"/>

	<menuitem id="mam_country_master" name="Country" parent="account.menu_finance_configuration" sequence="1" action="base.action_country"/>

	<menuitem id="menu_account_unit_measure" name="Units of Measure"
        parent="account.menu_finance_configuration"/>

	<menuitem action="product.product_uom_categ_form_action" id="menu_invoice_uom_categ_form_action"
    name="UoM Categories" parent="menu_account_unit_measure" />

   <menuitem id="menu_invoice_uom_form_action" action="product.product_uom_form_action"
    name="UoM" parent="menu_account_unit_measure"/>

	
	<!-- vendor debit notes menu changes -->
	
	<menuitem action="account.action_invoice_in_refund" id="account.menu_action_invoice_in_refund" name="Vendor Debit Notes" parent="account.menu_finance_payables_documents" sequence="1"/>

	<record id="account.action_invoice_in_refund" model="ir.actions.act_window">
	    <field name="name">Vendor Debit Notes</field>
	    <field name="res_model">account.invoice</field>
	    <field name="view_type">form</field>
	    <field name="view_mode">tree,kanban,form,calendar,pivot,graph</field>
	    <field eval="False" name="view_id"/>
	    <field name="domain">[('type','=','in_refund')]</field>
	    <field name="context">{'default_type': 'in_refund', 'type': 'in_refund', 'journal_type': 'purchase'}</field>
	    <field name="search_view_id" ref="account.view_account_invoice_filter"/>
	    <field name="help" type="html">
	      <p class="oe_view_nocontent_create">
	        Click to record a new vendor credit note.
	      </p>
	    </field>
	</record>
	
	<record id="ppts_account_invoice_tree_inherit" model="ir.ui.view">
		<field name="name">account.invoice.tree.view</field>
		<field name="model">account.invoice</field>
		<field name="inherit_id" ref="account.invoice_tree" />
		<field name="arch" type="xml">
			<xpath expr="//field[@name='origin']" position="replace">
				<field name="currency_rate"/>
			</xpath>
		</field>
	</record>
	
	<record id="ppts_vendor_bill_tree_inherit" model="ir.ui.view">
		<field name="name">account.invoice.tree.view</field>
		<field name="model">account.invoice</field>
		<field name="inherit_id" ref="account.invoice_supplier_tree" />
		<field name="arch" type="xml">
			<xpath expr="//field[@name='origin']" position="replace">
				<field name="currency_rate"/>
			</xpath>
		</field>
	</record>

</odoo>	